<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>Migrating from WSC 5.2 - PHP | WoltLab Suite 5.3 Documentation</title>

<link rel="stylesheet" href="https://docs.woltlab.com/css/syntax.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600">
<link rel="stylesheet" href="https://docs.woltlab.com/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="https://docs.woltlab.com/css/modern-business.css">
<link rel="stylesheet" href="https://docs.woltlab.com/css/lavish-bootstrap.css">
<link rel="stylesheet" href="https://docs.woltlab.com/css/customstyles.css">
<link rel="stylesheet" href="https://docs.woltlab.com/css/theme-blue.css?v=3">

<script src="https://docs.woltlab.com/js/jquery.min.js"></script>
<script src="https://docs.woltlab.com/js/jquery.cookie.min.js"></script>
<script src="https://docs.woltlab.com/js/jquery.navgoco.min.js"></script>
<script src="https://docs.woltlab.com/js/bootstrap.min.js"></script>
<script src="https://docs.woltlab.com/js/anchor.min.js"></script>
<script src="https://docs.woltlab.com/js/toc.js"></script>
<script src="https://docs.woltlab.com/js/customscripts.js"></script>

<link rel="shortcut icon" href="https://docs.woltlab.com/images/favicon.ico">

<link rel="alternate" type="application/rss+xml" title="mike-test" href="https://docs.woltlab.comfeed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
  <!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> WoltLab Suite 5.3 Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                
                
                <li><a href="https://www.woltlab.com" target="_blank">woltlab.com</a></li>
                
                
                
                
                
                <li><a href="https://github.com/WoltLab/WCF/" target="_blank">Code on github.com</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="https://docs.woltlab.com/js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'https://docs.woltlab.com/search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Migrating from WSC 5.2 - PHP">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>


  <div class="container">
    <div class="col-lg-12">&nbsp;</div>

    <div class="row">
      <div class="col-md-3">
        


<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">WoltLab Suite 5.3</li>

    
        
            <li>
                <a href="#">Getting Started</a>
                <ul>
                    
                        
                            
                            
                                <li data-identifier="index"><a href="index.html">Introduction</a></li>
                            
                        

                        
                    
                        
                            
                            
                                <li data-identifier="getting-started_quick-start"><a href="getting-started_quick-start.html">Quick Start</a></li>
                            
                        

                        
                    
                </ul>
            </li>
        
            <li>
                <a href="#">PHP API</a>
                <ul>
                    
                        
                            
                            
                                <li data-identifier="php_pages"><a href="php_pages.html">Pages</a></li>
                            
                        

                        
                    
                        
                            
                            
                                <li data-identifier="php_database-objects"><a href="php_database-objects.html">Database Objects</a></li>
                            
                        

                        
                    
                        
                            
                            
                                <li data-identifier="php_database-access"><a href="php_database-access.html">Database Access</a></li>
                            
                        

                        
                    
                        
                            
                            
                                <li data-identifier="php_exceptions"><a href="php_exceptions.html">Exceptions</a></li>
                            
                        

                        
                    
                        

                        
                            <li class="subfolders">
                                <a href="#">API</a>
                                <ul>
                                    
                                        
                                        
                                            <li data-identifier="php_api_caches"><a href="php_api_caches.html">Caches</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="php_api_comments"><a href="php_api_comments.html">Comments</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="php_api_cronjobs"><a href="php_api_cronjobs.html">Cronjobs</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="php_api_events"><a href="php_api_events.html">Events</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="php_api_form_builder"><a href="php_api_form_builder.html">Form Builder</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="php_api_package_installation_plugins"><a href="php_api_package_installation_plugins.html">Package Installation Plugins</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="php_api_user_activity_points"><a href="php_api_user_activity_points.html">User Activity Points</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="php_api_user_notifications"><a href="php_api_user_notifications.html">User Notifications</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="php_api_sitemaps"><a href="php_api_sitemaps.html">Sitemaps</a></li>
                                        
                                    
                                </ul>
                            </li>
                        
                    
                        
                            
                            
                                <li data-identifier="php_code-style"><a href="php_code-style.html">Code Style</a></li>
                            
                        

                        
                    
                        
                            
                            
                                <li data-identifier="php_apps"><a href="php_apps.html">Apps</a></li>
                            
                        

                        
                    
                        
                            
                            
                                <li data-identifier="php_gdpr"><a href="php_gdpr.html">GDPR</a></li>
                            
                        

                        
                    
                </ul>
            </li>
        
            <li>
                <a href="#">Languages, Templates & CSS</a>
                <ul>
                    
                        
                            
                            
                                <li data-identifier="view_languages"><a href="view_languages.html">Languages</a></li>
                            
                        

                        
                    
                        
                            
                            
                                <li data-identifier="view_templates"><a href="view_templates.html">Templates</a></li>
                            
                        

                        
                    
                        
                            
                            
                                <li data-identifier="view_css"><a href="view_css.html">CSS</a></li>
                            
                        

                        
                    
                </ul>
            </li>
        
            <li>
                <a href="#">JavaScript API</a>
                <ul>
                    
                        
                            
                            
                                <li data-identifier="javascript_general-usage"><a href="javascript_general-usage.html">General Usage</a></li>
                            
                        

                        
                    
                        

                        
                            <li class="subfolders">
                                <a href="#">New API</a>
                                <ul>
                                    
                                        
                                        
                                            <li data-identifier="javascript_new-api_writing-a-module"><a href="javascript_new-api_writing-a-module.html">Writing a module</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="javascript_new-api_data-structures"><a href="javascript_new-api_data-structures.html">Data Structures</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="javascript_new-api_core"><a href="javascript_new-api_core.html">Core Functions</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="javascript_new-api_dom"><a href="javascript_new-api_dom.html">DOM</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="javascript_new-api_events"><a href="javascript_new-api_events.html">Event Handling</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="javascript_new-api_ajax"><a href="javascript_new-api_ajax.html">Ajax</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="javascript_new-api_dialogs"><a href="javascript_new-api_dialogs.html">Dialogs</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="javascript_new-api_browser"><a href="javascript_new-api_browser.html">Browser and Screen Sizes</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="javascript_new-api_ui"><a href="javascript_new-api_ui.html">User Interface</a></li>
                                        
                                    
                                </ul>
                            </li>
                        
                    
                        
                            
                            
                                <li data-identifier="javascript_legacy-api"><a href="javascript_legacy-api.html">Legacy API</a></li>
                            
                        

                        
                    
                        
                            
                            
                                <li data-identifier="javascript_helper-functions"><a href="javascript_helper-functions.html">Helper Functions</a></li>
                            
                        

                        
                    
                        
                            
                            
                                <li data-identifier="javascript_code-snippets"><a href="javascript_code-snippets.html">Code Snippets</a></li>
                            
                        

                        
                    
                </ul>
            </li>
        
            <li>
                <a href="#">Package Components</a>
                <ul>
                    
                        
                            
                            
                                <li data-identifier="package_package-xml"><a href="package_package-xml.html">package.xml</a></li>
                            
                        

                        
                    
                        
                            
                            
                                <li data-identifier="package_pip"><a href="package_pip.html">PIPs</a></li>
                            
                        

                        
                    
                </ul>
            </li>
        
            <li>
                <a href="#">Migration</a>
                <ul>
                    
                        

                        
                            <li class="subfolders">
                                <a href="#">Migrating from WSC 5.2</a>
                                <ul>
                                    
                                        
                                        
                                            <li class="active" data-identifier="migration_wsc-52_php"><a href="migration_wsc-52_php.html">PHP API</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="migration_wsc-52_templates"><a href="migration_wsc-52_templates.html">Templates and Languages</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="migration_wsc-52_libraries"><a href="migration_wsc-52_libraries.html">Third Party Libraries</a></li>
                                        
                                    
                                </ul>
                            </li>
                        
                            <li class="subfolders">
                                <a href="#">Migrating from WSC 3.1</a>
                                <ul>
                                    
                                        
                                        
                                            <li data-identifier="migration_wsc-31_php"><a href="migration_wsc-31_php.html">PHP API</a></li>
                                        
                                    
                                </ul>
                            </li>
                        
                            <li class="subfolders">
                                <a href="#">Migrating from WSC 3.0</a>
                                <ul>
                                    
                                        
                                        
                                            <li data-identifier="migration_wsc-30_php"><a href="migration_wsc-30_php.html">PHP API</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="migration_wsc-30_javascript"><a href="migration_wsc-30_javascript.html">JavaScript API</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="migration_wsc-30_templates"><a href="migration_wsc-30_templates.html">Templates</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="migration_wsc-30_css"><a href="migration_wsc-30_css.html">CSS</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="migration_wsc-30_package"><a href="migration_wsc-30_package.html">Package Components</a></li>
                                        
                                    
                                </ul>
                            </li>
                        
                            <li class="subfolders">
                                <a href="#">Migrating from WCF 2.1</a>
                                <ul>
                                    
                                        
                                        
                                            <li data-identifier="migration_wcf-21_php"><a href="migration_wcf-21_php.html">PHP API</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="migration_wcf-21_templates"><a href="migration_wcf-21_templates.html">Templates</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="migration_wcf-21_css"><a href="migration_wcf-21_css.html">CSS</a></li>
                                        
                                    
                                        
                                        
                                            <li data-identifier="migration_wcf-21_package"><a href="migration_wcf-21_package.html">Package Components</a></li>
                                        
                                    
                                </ul>
                            </li>
                        
                    
                </ul>
            </li>
        
            <li>
                <a href="#">Tutorials</a>
                <ul>
                    
                        
                            
                            
                                <li data-identifier="tutorial_tutorial-series"><a href="tutorial_tutorial-series.html">Tutorial Series</a></li>
                            
                        

                        
                    
                </ul>
            </li>
        
    
</ul>

<script>
(function() {
    var sidebar = $('#mysidebar');
    var item = sidebar.find('.active');
    if (item.length === 0) {
        var parent = '';
        if (parent) {
            sidebar.find('li[data-identifier="' + parent + '"]').addClass('active');
        }
    }

    sidebar.find(".active").parents('li').toggleClass("active");
})();
</script>

      </div>

      <div class="col-md-9">
        <div class="post-header">
   <h1 class="post-title-main">Migrating from WSC 5.2 - PHP</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    
    
  <h2 id="comments">Comments</h2>

<p>The <a href="https://github.com/WoltLab/WCF/blob/aa96d34130d58c150a35ebd8936f09c830ccd685/wcfsetup/install/files/lib/system/comment/manager/ICommentManager.class.php#L151-L158"><code class="language-plaintext highlighter-rouge">ICommentManager::isContentAuthor(Comment|CommentResponse): bool</code></a> method was added.
A default implementation that always returns <code class="language-plaintext highlighter-rouge">false</code> is available when inheriting from <code class="language-plaintext highlighter-rouge">AbstractCommentManager</code>.</p>

<p>It is strongly recommended to implement <code class="language-plaintext highlighter-rouge">isContentAuthor</code> within your custom comment manager.
An example implementation <a href="https://github.com/WoltLab/WCF/blob/aa96d34130d58c150a35ebd8936f09c830ccd685/wcfsetup/install/files/lib/system/comment/manager/ArticleCommentManager.class.php#L213-L219">can be found in <code class="language-plaintext highlighter-rouge">ArticleCommentManager</code></a>.</p>

<h2 id="event-listeners">Event Listeners</h2>

<p>The <a href="https://github.com/WoltLab/WCF/blob/75631516d45f9355f6c73d6375bf804d2abd587e/wcfsetup/install/files/lib/system/event/listener/AbstractEventListener.class.php"><code class="language-plaintext highlighter-rouge">AbstractEventListener</code></a> class was added.
<code class="language-plaintext highlighter-rouge">AbstractEventListener</code> contains an implementation of <code class="language-plaintext highlighter-rouge">execute()</code> that will dispatch the event handling to dedicated methods based on the <code class="language-plaintext highlighter-rouge">$eventName</code> and, in case of the event object being an <code class="language-plaintext highlighter-rouge">AbstractDatabaseObjectAction</code>, the action name.</p>

<p>Find the details of the dispatch behavior within the class comment of <code class="language-plaintext highlighter-rouge">AbstractEventListener</code>.</p>

<h2 id="email-activation">Email Activation</h2>

<p>Starting with WoltLab Suite 5.3 the user activation status is independent of the email activation status.
A user can be activated even though their email address has not been confirmed, preventing emails being sent to these users.
Going forward the new <code class="language-plaintext highlighter-rouge">User::isEmailConfirmed()</code> method should be used to check whether sending automated emails to this user is acceptable.
If you need to check the user’s activation status you should use the new method <code class="language-plaintext highlighter-rouge">User::pendingActivation()</code> instead of relying on <code class="language-plaintext highlighter-rouge">activationCode</code>.
To check, which type of activation is missing, you can use the new methods <code class="language-plaintext highlighter-rouge">User::requiresEmailActivation()</code> and <code class="language-plaintext highlighter-rouge">User::requiresAdminActivation()</code>.</p>

<h2 id="addform"><code class="language-plaintext highlighter-rouge">*AddForm</code></h2>

<p>WoltLab Suite 5.3 provides a new framework to allow the administrator to easily edit newly created objects by adding an edit link to the success message.
To support this edit link two small changes are required within your <code class="language-plaintext highlighter-rouge">*AddForm</code>.</p>

<ol>
  <li>
    <p>Update the template.</p>

    <p>Replace:</p>
    <div class="language-smarty highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">{</span><span class="nb">include</span> <span class="na">file</span><span class="o">=</span><span class="s1">'formError'</span><span class="k">}</span>

 <span class="k">{</span><span class="nb">if</span> <span class="nv">$success</span><span class="o">|</span><span class="na">isset</span><span class="k">}</span>
     <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"success"</span><span class="nt">&gt;</span><span class="k">{</span><span class="na">lang</span><span class="k">}</span>wcf.global.success.<span class="k">{</span><span class="nv">$action</span><span class="k">}{/</span><span class="na">lang</span><span class="k">}</span><span class="nt">&lt;/p&gt;</span>
 <span class="k">{/</span><span class="nb">if</span><span class="k">}</span>
</code></pre></div>    </div>

    <p>With:</p>
    <div class="language-smarty highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">{</span><span class="nb">include</span> <span class="na">file</span><span class="o">=</span><span class="s1">'formNotice'</span><span class="k">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Expose <code class="language-plaintext highlighter-rouge">objectEditLink</code> to the template.</p>

    <p>Example (<code class="language-plaintext highlighter-rouge">$object</code> being the newly created object):</p>
    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nx">WCF</span><span class="o">::</span><span class="na">getTPL</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">assign</span><span class="p">([</span>
     <span class="s1">'success'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
     <span class="s1">'objectEditLink'</span> <span class="o">=&gt;</span> <span class="nx">LinkHandler</span><span class="o">::</span><span class="na">getInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getControllerLink</span><span class="p">(</span><span class="nx">ObjectEditForm</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="p">[</span><span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="nv">$object</span><span class="o">-&gt;</span><span class="na">objectID</span><span class="p">]),</span>
 <span class="p">]);</span>
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="user-generated-links">User Generated Links</h2>

<p>It is <a href="https://support.google.com/webmasters/answer/96569">recommended by search engines</a> to mark up links within user generated content using the <code class="language-plaintext highlighter-rouge">rel="ugc"</code> attribute to indicate that they might be less trustworthy or spammy.</p>

<p>WoltLab Suite 5.3 will automatically sets that attribute on external links during message output processing.
Set the new <code class="language-plaintext highlighter-rouge">HtmlOutputProcessor::$enableUgc</code> property to <code class="language-plaintext highlighter-rouge">false</code> if the type of message is not user-generated content, but restricted to a set of trustworthy users.
An example of such a type of message would be official news articles.</p>

<p>If you manually generate links based off user input you need to specify the attribute yourself.
The <code class="language-plaintext highlighter-rouge">$isUgc</code> attribute was added to <a href="https://github.com/WoltLab/WCF/blob/af245d7b9bdb411a344f79c0a038350c1f103e70/wcfsetup/install/files/lib/util/StringUtil.class.php#L664-L673"><code class="language-plaintext highlighter-rouge">StringUtil::getAnchorTag(string, string, bool, bool): string</code></a>, allowing you to easily generate a correct anchor tag.</p>

<p>If you need to specify additional HTML attributes for the anchor tag you can use the new <a href="https://github.com/WoltLab/WCF/blob/af245d7b9bdb411a344f79c0a038350c1f103e70/wcfsetup/install/files/lib/util/StringUtil.class.php#L691-L699"><code class="language-plaintext highlighter-rouge">StringUtil::getAnchorTagAttributes(string, bool): string</code></a> method to generate the anchor attributes that are dependent on the target URL.
Specifically the attributes returned are the <code class="language-plaintext highlighter-rouge">class="externalURL"</code> attribute, the <code class="language-plaintext highlighter-rouge">rel="…"</code> attribute and the <code class="language-plaintext highlighter-rouge">target="…"</code> attribute.</p>

<p>Within the template the <a href="view_template-plugins.html#53-anchorattributes"><code class="language-plaintext highlighter-rouge">{anchorAttributes}</code></a> template plugin is newly available.</p>

<h2 id="resource-management-when-scaling-images">Resource Management When Scaling Images</h2>

<p>It was discovered that the code holds references to scaled image resources for an unnecessarily long time, taking up memory.
This becomes especially apparent when multiple images are scaled within a loop, reusing the same variable name for consecutive images.
Unless the destination variable is explicitely cleared before processing the next image up to two images will be stored in memory concurrently.
This possibly causes the request to exceed the memory limit or ImageMagick’s internal resource limits, even if sufficient resources would have been available to scale the current image.</p>

<p>Starting with WoltLab Suite 5.3 it is recommended to clear image handles as early as possible.
The usual pattern of creating a thumbnail for an existing image would then look like this:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="k">foreach</span> <span class="p">([</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">500</span> <span class="p">]</span> <span class="k">as</span> <span class="nv">$size</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$adapter</span> <span class="o">=</span> <span class="nx">ImageHandler</span><span class="o">::</span><span class="na">getInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getAdapter</span><span class="p">();</span>
    <span class="nv">$adapter</span><span class="o">-&gt;</span><span class="na">loadFile</span><span class="p">(</span><span class="nv">$src</span><span class="p">);</span>
    <span class="nv">$thumbnail</span> <span class="o">=</span> <span class="nv">$adapter</span><span class="o">-&gt;</span><span class="na">createThumbnail</span><span class="p">(</span>
        <span class="nv">$size</span><span class="p">,</span>
        <span class="nv">$size</span><span class="p">,</span>
        <span class="kc">true</span>
    <span class="p">);</span>
    <span class="nv">$adapter</span><span class="o">-&gt;</span><span class="na">writeImage</span><span class="p">(</span><span class="nv">$thumbnail</span><span class="p">,</span> <span class="nv">$destination</span><span class="p">);</span>
    <span class="c1">// New: Clear thumbnail as soon as possible to free up the memory.</span>
    <span class="nv">$thumbnail</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Refer to <a href="https://github.com/WoltLab/WCF/pull/3505">WoltLab/WCF#3505</a> for additional details.</p>

<h2 id="toggle-for-accelerated-mobile-pages-amp">Toggle for Accelerated Mobile Pages (AMP)</h2>

<p>Controllers delivering AMP versions of pages have to check for the new option <code class="language-plaintext highlighter-rouge">MODULE_AMP</code> and the templates of the non-AMP versions have to also check if the option is enabled before outputting the <code class="language-plaintext highlighter-rouge">&lt;link rel="amphtml" /&gt;</code> element.</p>


    <div class="tags">
        
    </div>

    

</div>

      </div>
    </div>
  </div>

  <div class="footerBox">
    <div class="container">
      <div class="footerBoxLeft">
        
        <a target="_blank" href="https://github.com/woltlab/woltlab.github.io/blob/master/pages/migration/wsc-52/migration_wsc-52_php.md" class="btn btn-default githubEditButton no_icon" role="button"><i class="fa fa-github fa-lg"></i> Edit on GitHub</a>
        <p>Site last generated: Mar 2, 2021</p>
      </div>
      <div class="footerBoxRight">
        <a class="no_icon" href="https://www.woltlab.com"><img src="https://docs.woltlab.com/images/woltlab-black.png" srcset="https://docs.woltlab.com/images/woltlab-black@2x.png 2x" height="40" width="204" alt=""></a>
      </div>
    </div>
  </div>

  <div class="pageFooter">
    <div class="container">
      &copy; 2001 ‐ 2021 <a class="no_icon" href="https://www.woltlab.com">WoltLab GmbH</a>. All rights reserved. | <a class="no_icon" href="https://www.woltlab.com/legal-notice/">Legal Notice</a> | <a class="no_icon" href="https://www.woltlab.com/privacy-policy/">Privacy Policy</a>
    </div>
  </div>
</body>

</html>
