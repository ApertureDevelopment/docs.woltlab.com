
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="shortcut icon" href="../../../assets/default.favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.0.3">
    
    
      
        <title>Part 2 - WoltLab Suite Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.1655a90d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.7fa14f5b.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
    
    
    

    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="teal" data-md-color-accent="">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#part-2-event-listeners-and-template-listeners" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-announce">
          <div class="md-announce__inner md-grid md-typeset">
            
    <a href="https://www.woltlab.com">Back to <strong>woltlab.com</strong></a>

          </div>
        </aside>
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="WoltLab Suite Documentation" class="md-header__button md-logo" aria-label="WoltLab Suite Documentation">
      
  <img src="../../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WoltLab Suite Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Part 2
            
          </span>
        </div>
      </div>
    </div>
    <div class="md-header__options">
      
    </div>
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="WoltLab Suite Documentation" class="md-nav__button md-logo" aria-label="WoltLab Suite Documentation">
      
  <img src="../../../assets/logo.png" alt="logo">

    </a>
    WoltLab Suite Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../getting-started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        PHP API
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="PHP API" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          PHP API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../php/pages/" class="md-nav__link">
        Pages
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../php/database-objects/" class="md-nav__link">
        Database Objects
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../php/database-access/" class="md-nav__link">
        Database Access
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../php/exceptions/" class="md-nav__link">
        Exceptions
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5" type="checkbox" id="__nav_2_5" >
      
      <label class="md-nav__link" for="__nav_2_5">
        API
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="API" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_5">
          <span class="md-nav__icon md-icon"></span>
          API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../php/api/caches/" class="md-nav__link">
        Caches
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../php/api/comments/" class="md-nav__link">
        Comments
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../php/api/cronjobs/" class="md-nav__link">
        Cronjobs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../php/api/events/" class="md-nav__link">
        Events
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5_5" type="checkbox" id="__nav_2_5_5" >
      
      <label class="md-nav__link" for="__nav_2_5_5">
        Form Builder
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Form Builder" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_5_5">
          <span class="md-nav__icon md-icon"></span>
          Form Builder
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../php/api/form_builder/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../php/api/form_builder/structure/" class="md-nav__link">
        Structure
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../php/api/form_builder/form_fields/" class="md-nav__link">
        Fields
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../php/api/form_builder/validation_data/" class="md-nav__link">
        Validation and Data
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../php/api/form_builder/dependencies/" class="md-nav__link">
        Dependencies
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../php/api/package_installation_plugins/" class="md-nav__link">
        Package Installation Plugins
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../php/api/user_activity_points/" class="md-nav__link">
        User Activity Points
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../php/api/user_notifications/" class="md-nav__link">
        User Notifications
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../php/api/sitemaps/" class="md-nav__link">
        Sitemaps
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../php/code-style/" class="md-nav__link">
        Code Style
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../php/apps/" class="md-nav__link">
        Apps
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../php/gdpr/" class="md-nav__link">
        GDPR
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Languages, Templates & CSS
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Languages, Templates & CSS" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Languages, Templates & CSS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../view/languages/" class="md-nav__link">
        Languages
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../view/templates/" class="md-nav__link">
        Templates
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../view/css/" class="md-nav__link">
        CSS
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        JavaScript API
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="JavaScript API" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          JavaScript API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../javascript/general-usage/" class="md-nav__link">
        General Usage
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      <label class="md-nav__link" for="__nav_4_2">
        New API
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="New API" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          New API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../javascript/new-api_writing-a-module/" class="md-nav__link">
        Writing a module
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../javascript/new-api_data-structures/" class="md-nav__link">
        Data Structures
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../javascript/new-api_core/" class="md-nav__link">
        Core Functions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../javascript/new-api_dom/" class="md-nav__link">
        DOM
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../javascript/new-api_events/" class="md-nav__link">
        Event Handling
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../javascript/new-api_ajax/" class="md-nav__link">
        Ajax
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../javascript/new-api_dialogs/" class="md-nav__link">
        Dialogs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../javascript/new-api_browser/" class="md-nav__link">
        Browser and Screen Sizes
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../javascript/new-api_ui/" class="md-nav__link">
        User Interface
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../javascript/legacy-api/" class="md-nav__link">
        Legacy API
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../javascript/helper-functions/" class="md-nav__link">
        Helper Functions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../javascript/code-snippets/" class="md-nav__link">
        Code Snippets
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Package Components
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Package Components" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Package Components
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/package-xml/" class="md-nav__link">
        package.xml
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2" type="checkbox" id="__nav_5_2" >
      
      <label class="md-nav__link" for="__nav_5_2">
        PIPs
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="PIPs" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          PIPs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/acl-option/" class="md-nav__link">
        aclOption
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/acp-menu/" class="md-nav__link">
        acpMenu
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/acp-search-provider/" class="md-nav__link">
        acpSearchProvider
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/acp-template/" class="md-nav__link">
        acpTemplate
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/bbcode/" class="md-nav__link">
        bbcode
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/box/" class="md-nav__link">
        box
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/clipboard-action/" class="md-nav__link">
        clipboardAction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/core-object/" class="md-nav__link">
        coreObject
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/cronjob/" class="md-nav__link">
        cronjob
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/event-listener/" class="md-nav__link">
        eventListener
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/file/" class="md-nav__link">
        file
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/language/" class="md-nav__link">
        language
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/media-provider/" class="md-nav__link">
        mediaProvider
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/menu/" class="md-nav__link">
        menu
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/menu-item/" class="md-nav__link">
        menuItem
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/object-type/" class="md-nav__link">
        objectType
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/object-type-definition/" class="md-nav__link">
        objectTypeDefinition
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/option/" class="md-nav__link">
        option
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/page/" class="md-nav__link">
        page
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/pip/" class="md-nav__link">
        pip
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/script/" class="md-nav__link">
        script
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/smiley/" class="md-nav__link">
        smiley
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/sql/" class="md-nav__link">
        sql
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/style/" class="md-nav__link">
        style
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/template/" class="md-nav__link">
        template
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/template-listener/" class="md-nav__link">
        templateListener
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/user-group-option/" class="md-nav__link">
        userGroupOption
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/user-menu/" class="md-nav__link">
        userMenu
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/user-notification-event/" class="md-nav__link">
        userNotificationEvent
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/user-option/" class="md-nav__link">
        userOption
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/pip/user-profile-menu/" class="md-nav__link">
        userProfileMenu
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../package/database-php-api/" class="md-nav__link">
        Database PHP API
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        Migration
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Migration" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Migration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1" type="checkbox" id="__nav_6_1" >
      
      <label class="md-nav__link" for="__nav_6_1">
        Migrating from WSC 5.3
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Migrating from WSC 5.3" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_1">
          <span class="md-nav__icon md-icon"></span>
          Migrating from WSC 5.3
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../migration/wsc53/php/" class="md-nav__link">
        PHP API
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../migration/wsc53/session/" class="md-nav__link">
        Session Handling and Authentication
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../migration/wsc53/javascript/" class="md-nav__link">
        JavaScript
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../migration/wsc53/templates/" class="md-nav__link">
        Templates
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../migration/wsc53/libraries/" class="md-nav__link">
        Third Party Libraries
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_2" type="checkbox" id="__nav_6_2" >
      
      <label class="md-nav__link" for="__nav_6_2">
        Migrating from WSC 5.2
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Migrating from WSC 5.2" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_2">
          <span class="md-nav__icon md-icon"></span>
          Migrating from WSC 5.2
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../migration/wsc52/php/" class="md-nav__link">
        PHP API
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../migration/wsc52/templates/" class="md-nav__link">
        Templates and Languages
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../migration/wsc52/libraries/" class="md-nav__link">
        Third Party Libraries
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_3" type="checkbox" id="__nav_6_3" >
      
      <label class="md-nav__link" for="__nav_6_3">
        Migrating from WSC 3.1
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Migrating from WSC 3.1" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_3">
          <span class="md-nav__icon md-icon"></span>
          Migrating from WSC 3.1
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../migration/wsc31/php/" class="md-nav__link">
        PHP API
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_4" type="checkbox" id="__nav_6_4" >
      
      <label class="md-nav__link" for="__nav_6_4">
        Migrating from WSC 3.0
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Migrating from WSC 3.0" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_4">
          <span class="md-nav__icon md-icon"></span>
          Migrating from WSC 3.0
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../migration/wsc30/php/" class="md-nav__link">
        PHP API
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../migration/wsc30/javascript/" class="md-nav__link">
        JavaScript API
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../migration/wsc30/templates/" class="md-nav__link">
        Templates
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../migration/wsc30/css/" class="md-nav__link">
        CSS
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../migration/wsc30/package/" class="md-nav__link">
        Package Components
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_5" type="checkbox" id="__nav_6_5" >
      
      <label class="md-nav__link" for="__nav_6_5">
        Migrating from WCF 2.1
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Migrating from WCF 2.1" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_5">
          <span class="md-nav__icon md-icon"></span>
          Migrating from WCF 2.1
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../migration/wcf21/php/" class="md-nav__link">
        PHP API
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../migration/wcf21/templates/" class="md-nav__link">
        Templates
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../migration/wcf21/css/" class="md-nav__link">
        CSS
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../migration/wcf21/package/" class="md-nav__link">
        Package Components
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" checked>
      
      <label class="md-nav__link" for="__nav_7">
        Tutorials
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Tutorials" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1" type="checkbox" id="__nav_7_1" checked>
      
      <label class="md-nav__link" for="__nav_7_1">
        Tutorial Series
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Tutorial Series" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_1">
          <span class="md-nav__icon md-icon"></span>
          Tutorial Series
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../part_1/" class="md-nav__link">
        Part 1
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Part 2
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Part 2
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#package-functionality" class="md-nav__link">
    Package Functionality
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#used-components" class="md-nav__link">
    Used Components
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#package-structure" class="md-nav__link">
    Package Structure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extending-person-model-installsql" class="md-nav__link">
    Extending Person Model (install.sql)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-birthday-in-acp" class="md-nav__link">
    Setting Birthday in ACP
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-birthday-table-column-in-acp" class="md-nav__link">
    Adding Birthday Table Column in ACP
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-birthday-in-front-end" class="md-nav__link">
    Adding Birthday in Front End
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#templatelistenerxml" class="md-nav__link">
    templateListener.xml
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eventlistenerxml" class="md-nav__link">
    eventListener.xml
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#packagexml" class="md-nav__link">
    package.xml
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../part_3/" class="md-nav__link">
        Part 3
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#package-functionality" class="md-nav__link">
    Package Functionality
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#used-components" class="md-nav__link">
    Used Components
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#package-structure" class="md-nav__link">
    Package Structure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extending-person-model-installsql" class="md-nav__link">
    Extending Person Model (install.sql)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-birthday-in-acp" class="md-nav__link">
    Setting Birthday in ACP
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-birthday-table-column-in-acp" class="md-nav__link">
    Adding Birthday Table Column in ACP
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-birthday-in-front-end" class="md-nav__link">
    Adding Birthday in Front End
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#templatelistenerxml" class="md-nav__link">
    templateListener.xml
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eventlistenerxml" class="md-nav__link">
    eventListener.xml
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#packagexml" class="md-nav__link">
    package.xml
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="part-2-event-listeners-and-template-listeners">Part 2: Event Listeners and Template Listeners<a class="headerlink" href="#part-2-event-listeners-and-template-listeners" title="Permanent link">#</a></h1>
<p>In the <a href="../part_1/">first part</a> of this tutorial series, we have created the base structure of our people management package.
In further parts, we will use the package of the first part as a basis to directly add new features.
In order to explain how event listeners and template works, however, we will not directly adding a new feature to the package by altering it in this part, but we will assume that somebody else created the package and that we want to extend it the “correct” way by creating a plugin.</p>
<p>The goal of the small plugin that will be created in this part is to add the birthday of the managed people.
As in the first part, we will not bother with careful validation of the entered date but just make sure that it is a valid date.</p>
<h2 id="package-functionality">Package Functionality<a class="headerlink" href="#package-functionality" title="Permanent link">#</a></h2>
<p>The package should provide the following possibilities/functions:</p>
<ul>
<li>List person’s birthday (if set) in people list in the ACP</li>
<li>Sort people list by birthday in the ACP</li>
<li>Add or remove birthday when adding or editing person</li>
<li>List person’s birthday (if set) in people list in the front end</li>
<li>Sort people list by birthday in the front end</li>
</ul>
<h2 id="used-components">Used Components<a class="headerlink" href="#used-components" title="Permanent link">#</a></h2>
<p>We will use the following package installation plugins:</p>
<ul>
<li><a href="../../../package/pip/acp-template/">acpTemplate package installation plugin</a>,</li>
<li><a href="../../../package/pip/event-listener/">eventListener package installation plugin</a>,</li>
<li><a href="../../../package/pip/file/">file package installation plugin</a>,</li>
<li><a href="../../../package/pip/language/">language package installation plugin</a>,</li>
<li><a href="../../../package/pip/sql/">sql package installation plugin</a>,</li>
<li><a href="../../../package/pip/template/">template package installation plugin</a>,</li>
<li><a href="../../../package/pip/template-listener/">templateListener package installation plugin</a>.</li>
</ul>
<p>For more information about the event system, please refer to the <a href="../../../php/api/events/">dedicated page on events</a>.</p>
<h2 id="package-structure">Package Structure<a class="headerlink" href="#package-structure" title="Permanent link">#</a></h2>
<p>The package will have the following file structure:</p>
<div class="highlight"><pre><span></span><code>├── acptemplates
│   └── __personAddBirthday.tpl
├── eventListener.xml
├── files
│   └── lib
│       └── system
│           └── event
│               └── listener
│                   ├── BirthdayPersonAddFormListener.class.php
│                   └── BirthdaySortFieldPersonListPageListener.class.php
├── install.sql
├── language
│   ├── de.xml
│   └── en.xml
├── package.xml
├── templateListener.xml
└── templates
    ├── __personListBirthday.tpl
    └── __personListBirthdaySortField.tpl
</code></pre></div>
<h2 id="extending-person-model-installsql">Extending Person Model (<code>install.sql</code>)<a class="headerlink" href="#extending-person-model-installsql" title="Permanent link">#</a></h2>
<p>The existing model of a person only contains the person’s first name and their last name (in additional to the id used to identify created people).
To add the birthday to the model, we need to create an additional database table column using the <a href="../../../package/pip/sql/">sql package installation plugin</a>:</p>
<div class="highlight"><pre><span></span><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">wcf1_person</span> <span class="k">ADD</span> <span class="n">birthday</span> <span class="nb">DATE</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">;</span>
</code></pre></div>
<p>If we have a <a href="../part_1/#person">Person object</a>, this new property can be accessed the same way as the <code>personID</code> property, the <code>firstName</code> property, or the <code>lastName</code> property from the base package: <code>$person-&gt;birthday</code>.</p>
<h2 id="setting-birthday-in-acp">Setting Birthday in ACP<a class="headerlink" href="#setting-birthday-in-acp" title="Permanent link">#</a></h2>
<p>To set the birthday of a person, we need to extend the <code>personAdd</code> template to add an additional birthday field.
This can be achieved using the <code>dataFields</code> template event at whose position we inject the following template code:</p>
<div class="highlight"><pre><span></span><code><span class="o">&lt;</span><span class="n">dl</span><span class="err">{</span><span class="k">if</span> <span class="err">$</span><span class="n">errorField</span> <span class="o">==</span> <span class="s1">&#39;birthday&#39;</span><span class="err">}</span> <span class="k">class</span><span class="o">=</span><span class="ss">&quot;formError&quot;</span><span class="err">{</span><span class="o">/</span><span class="k">if</span><span class="err">}</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">dt</span><span class="o">&gt;&lt;</span><span class="n">label</span> <span class="k">for</span><span class="o">=</span><span class="ss">&quot;birthday&quot;</span><span class="o">&gt;</span><span class="err">{</span><span class="n">lang</span><span class="err">}</span><span class="n">wcf</span><span class="p">.</span><span class="n">person</span><span class="p">.</span><span class="n">birthday</span><span class="err">{</span><span class="o">/</span><span class="n">lang</span><span class="err">}</span><span class="o">&lt;/</span><span class="n">label</span><span class="o">&gt;&lt;/</span><span class="n">dt</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">dd</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="k">input</span> <span class="k">type</span><span class="o">=</span><span class="ss">&quot;date&quot;</span> <span class="n">id</span><span class="o">=</span><span class="ss">&quot;birthday&quot;</span> <span class="n">name</span><span class="o">=</span><span class="ss">&quot;birthday&quot;</span> <span class="n">value</span><span class="o">=</span><span class="ss">&quot;{$birthday}&quot;</span><span class="o">&gt;</span>
        <span class="err">{</span><span class="k">if</span> <span class="err">$</span><span class="n">errorField</span> <span class="o">==</span> <span class="s1">&#39;birthday&#39;</span><span class="err">}</span>
            <span class="o">&lt;</span><span class="n">small</span> <span class="k">class</span><span class="o">=</span><span class="ss">&quot;innerError&quot;</span><span class="o">&gt;</span>
                <span class="err">{</span><span class="k">if</span> <span class="err">$</span><span class="n">errorType</span> <span class="o">==</span> <span class="s1">&#39;noValidSelection&#39;</span><span class="err">}</span>
                    <span class="err">{</span><span class="n">lang</span><span class="err">}</span><span class="n">wcf</span><span class="p">.</span><span class="k">global</span><span class="p">.</span><span class="n">form</span><span class="p">.</span><span class="n">error</span><span class="p">.</span><span class="n">noValidSelection</span><span class="err">{</span><span class="o">/</span><span class="n">lang</span><span class="err">}</span>
                <span class="err">{</span><span class="k">else</span><span class="err">}</span>
                    <span class="err">{</span><span class="n">lang</span><span class="err">}</span><span class="n">wcf</span><span class="p">.</span><span class="n">acp</span><span class="p">.</span><span class="n">person</span><span class="p">.</span><span class="n">birthday</span><span class="p">.</span><span class="n">error</span><span class="p">.</span><span class="err">{$</span><span class="n">errorType</span><span class="err">}{</span><span class="o">/</span><span class="n">lang</span><span class="err">}</span>
                <span class="err">{</span><span class="o">/</span><span class="k">if</span><span class="err">}</span>
            <span class="o">&lt;/</span><span class="n">small</span><span class="o">&gt;</span>
        <span class="err">{</span><span class="o">/</span><span class="k">if</span><span class="err">}</span>
    <span class="o">&lt;/</span><span class="n">dd</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">dl</span><span class="o">&gt;</span>
</code></pre></div>
<p>which we store in a <code>__personAddBirthday.tpl</code> template file.
The used language item <code>wcf.person.birthday</code> is actually the only new one for this package:</p>
<div class="highlight"><pre><span></span><code><span class="o">&lt;?</span><span class="n">xml</span> <span class="k">version</span><span class="o">=</span><span class="ss">&quot;1.0&quot;</span> <span class="k">encoding</span><span class="o">=</span><span class="ss">&quot;UTF-8&quot;</span><span class="o">?&gt;</span>
<span class="o">&lt;</span><span class="k">language</span> <span class="n">xmlns</span><span class="o">=</span><span class="ss">&quot;http://www.woltlab.com&quot;</span> <span class="n">xmlns</span><span class="p">:</span><span class="n">xsi</span><span class="o">=</span><span class="ss">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="n">xsi</span><span class="p">:</span><span class="n">schemaLocation</span><span class="o">=</span><span class="ss">&quot;http://www.woltlab.com http://www.woltlab.com/XSD/tornado/language.xsd&quot;</span> <span class="n">languagecode</span><span class="o">=</span><span class="ss">&quot;de&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">category</span> <span class="n">name</span><span class="o">=</span><span class="ss">&quot;wcf.person&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="o">=</span><span class="ss">&quot;wcf.person.birthday&quot;</span><span class="o">&gt;&lt;!</span><span class="p">[</span><span class="n">CDATA</span><span class="p">[</span><span class="n">Geburtstag</span><span class="p">]]</span><span class="o">&gt;&lt;/</span><span class="n">item</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">category</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="k">language</span><span class="o">&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="o">&lt;?</span><span class="n">xml</span> <span class="k">version</span><span class="o">=</span><span class="ss">&quot;1.0&quot;</span> <span class="k">encoding</span><span class="o">=</span><span class="ss">&quot;UTF-8&quot;</span><span class="o">?&gt;</span>
<span class="o">&lt;</span><span class="k">language</span> <span class="n">xmlns</span><span class="o">=</span><span class="ss">&quot;http://www.woltlab.com&quot;</span> <span class="n">xmlns</span><span class="p">:</span><span class="n">xsi</span><span class="o">=</span><span class="ss">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="n">xsi</span><span class="p">:</span><span class="n">schemaLocation</span><span class="o">=</span><span class="ss">&quot;http://www.woltlab.com http://www.woltlab.com/XSD/tornado/language.xsd&quot;</span> <span class="n">languagecode</span><span class="o">=</span><span class="ss">&quot;en&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">category</span> <span class="n">name</span><span class="o">=</span><span class="ss">&quot;wcf.person&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">item</span> <span class="n">name</span><span class="o">=</span><span class="ss">&quot;wcf.person.birthday&quot;</span><span class="o">&gt;&lt;!</span><span class="p">[</span><span class="n">CDATA</span><span class="p">[</span><span class="n">Birthday</span><span class="p">]]</span><span class="o">&gt;&lt;/</span><span class="n">item</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">category</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="k">language</span><span class="o">&gt;</span>
</code></pre></div>
<p>The template listener needs to be registered using the <a href="../../../package/pip/template-listener/">templateListener package installation plugin</a>.
The corresponding complete <code>templateListener.xml</code> file is included <a href="#templatelistenerxml">below</a>.</p>
<p>The template code alone is not sufficient because the <code>birthday</code> field is, at the moment, neither read, nor processed, nor saved by any PHP code.
This can be be achieved, however, by adding event listeners to <code>PersonAddForm</code> and <code>PersonEditForm</code> which allow us to execute further code at specific location of the program.
Before we take a look at the event listener code, we need to identify exactly which additional steps we need to undertake:</p>
<ol>
<li>If a person is edited and the form has not been submitted, the existing birthday of that person needs to be read.</li>
<li>If a person is added or edited and the form has been submitted, the new birthday value needs to be read.</li>
<li>If a person is added or edited and the form has been submitted, the new birthday value needs to be validated.</li>
<li>If a person is added or edited and the new birthday value has been successfully validated, the new birthday value needs to be saved.</li>
<li>If a person is added and the new birthday value has been successfully saved, the internally stored birthday needs to be reset so that the birthday field is empty when the form is shown again.</li>
<li>The internally stored birthday value needs to be assigned to the template.</li>
</ol>
<p>The following event listeners achieves these requirements:</p>
<div class="highlight"><pre><span></span><code><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">namespace</span> <span class="nx">wcf\system\event\listener</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">wcf\acp\form\PersonAddForm</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">wcf\acp\form\PersonEditForm</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">wcf\form\IForm</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">wcf\page\IPage</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">wcf\system\exception\UserInputException</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">wcf\system\WCF</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">wcf\util\StringUtil</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * Handles setting the birthday when adding and editing people.</span>
<span class="sd"> *</span>
<span class="sd"> * @author  Matthias Schmidt</span>
<span class="sd"> * @copyright   2001-2020 WoltLab GmbH</span>
<span class="sd"> * @license GNU Lesser General Public License &lt;http://opensource.org/licenses/lgpl-license.php&gt;</span>
<span class="sd"> * @package WoltLabSuite\Core\System\Event\Listener</span>
<span class="sd"> */</span>
<span class="k">class</span> <span class="nc">BirthdayPersonAddFormListener</span> <span class="k">extends</span> <span class="nx">AbstractEventListener</span> <span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * birthday of the created or edited person</span>
<span class="sd">     * @var string</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="nv">$birthday</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * @see IPage::assignVariables()</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">onAssignVariables</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">WCF</span><span class="o">::</span><span class="na">getTPL</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">assign</span><span class="p">(</span><span class="s1">&#39;birthday&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">birthday</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @see IPage::readData()</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">onReadData</span><span class="p">(</span><span class="nx">PersonEditForm</span> <span class="nv">$form</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">birthday</span> <span class="o">=</span> <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">person</span><span class="o">-&gt;</span><span class="na">birthday</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">birthday</span> <span class="o">===</span> <span class="s1">&#39;0000-00-00&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">birthday</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @see IForm::readFormParameters()</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">onReadFormParameters</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;birthday&#39;</span><span class="p">]))</span> <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">birthday</span> <span class="o">=</span> <span class="nx">StringUtil</span><span class="o">::</span><span class="na">trim</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;birthday&#39;</span><span class="p">]);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @see IForm::save()</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">onSave</span><span class="p">(</span><span class="nx">PersonAddForm</span> <span class="nv">$form</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">birthday</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">additionalFields</span><span class="p">[</span><span class="s1">&#39;birthday&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">birthday</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">additionalFields</span><span class="p">[</span><span class="s1">&#39;birthday&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;0000-00-00&#39;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @see IForm::saved()</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">onSaved</span><span class="p">()</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">birthday</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @see IForm::validate()</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">onValidate</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">birthday</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/^(\d{4})-(\d{2})-(\d{2})$/&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">birthday</span><span class="p">,</span> <span class="nv">$match</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">UserInputException</span><span class="p">(</span><span class="s1">&#39;birthday&#39;</span><span class="p">,</span> <span class="s1">&#39;noValidSelection&#39;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">checkdate</span><span class="p">(</span><span class="nb">intval</span><span class="p">(</span><span class="nv">$match</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span> <span class="nb">intval</span><span class="p">(</span><span class="nv">$match</span><span class="p">[</span><span class="mi">3</span><span class="p">]),</span> <span class="nb">intval</span><span class="p">(</span><span class="nv">$match</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">UserInputException</span><span class="p">(</span><span class="s1">&#39;birthday&#39;</span><span class="p">,</span> <span class="s1">&#39;noValidSelection&#39;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Some notes on the code:</p>
<ul>
<li>We are inheriting from <code>AbstractEventListener</code>, instead of just implementing the <code>IParameterizedEventListener</code> interface.
  The <code>execute()</code> method of <code>AbstractEventListener</code> contains a dispatcher that automatically calls methods called <code>on</code> followed by the event name with the first character uppercased, passing the event object and the <code>$parameters</code> array.
  This simple pattern results in the event <code>foo</code> being forwarded to the method <code>onFoo($eventObj, $parameters)</code>.</li>
<li>The <code>birthday</code> column has a default value of <code>0000-00-00</code>, which we interpret as “birthday not set”.
  To show an empty input field in this case, we empty the <code>birthday</code> property after reading such a value in <code>readData()</code>.</li>
<li>The validation of the date is, as mentioned before, very basic and just checks the form of the string and uses PHP’s <a href="https://secure.php.net/manual/en/function.checkdate.php">checkdate</a> function to validate the components.</li>
<li>The <code>save</code> needs to make sure that the passed date is actually a valid date and set it to <code>0000-00-00</code> if no birthday is given.
  To actually save the birthday in the database, we do not directly manipulate the database but can add an additional field to the data array passed to <code>PersonAction::create()</code> via <code>AbstractForm::$additionalFields</code>.
  As the <code>save</code> event is the last event fired before the actual save process happens, this is the perfect event to set this array element.</li>
</ul>
<p>The event listeners are installed using the <code>eventListener.xml</code> file shown <a href="#eventlistenerxml">below</a>.</p>
<h2 id="adding-birthday-table-column-in-acp">Adding Birthday Table Column in ACP<a class="headerlink" href="#adding-birthday-table-column-in-acp" title="Permanent link">#</a></h2>
<p>To add a birthday column to the person list page in the ACP, we need three parts:</p>
<ol>
<li>an event listener that makes the <code>birthday</code> database table column a valid sort field,</li>
<li>a template listener that adds the birthday column to the table’s head, and</li>
<li>a template listener that adds the birthday column to the table’s rows.</li>
</ol>
<p>The first part is a very simple class:</p>
<div class="highlight"><pre><span></span><code><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">namespace</span> <span class="nx">wcf\system\event\listener</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">wcf\page\SortablePage</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * Makes people&#39;s birthday a valid sort field in the ACP and the front end.</span>
<span class="sd"> * </span>
<span class="sd"> * @author  Matthias Schmidt</span>
<span class="sd"> * @copyright   2001-2019 WoltLab GmbH</span>
<span class="sd"> * @license GNU Lesser General Public License &lt;http://opensource.org/licenses/lgpl-license.php&gt;</span>
<span class="sd"> * @package WoltLabSuite\Core\System\Event\Listener</span>
<span class="sd"> */</span>
<span class="k">class</span> <span class="nc">BirthdaySortFieldPersonListPageListener</span> <span class="k">implements</span> <span class="nx">IParameterizedEventListener</span> <span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @inheritDoc</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">execute</span><span class="p">(</span><span class="nv">$eventObj</span><span class="p">,</span> <span class="nv">$className</span><span class="p">,</span> <span class="nv">$eventName</span><span class="p">,</span> <span class="k">array</span> <span class="o">&amp;</span><span class="nv">$parameters</span><span class="p">)</span> <span class="p">{</span>
        <span class="sd">/** @var SortablePage $eventObj */</span>

        <span class="nv">$eventObj</span><span class="o">-&gt;</span><span class="na">validSortFields</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">&#39;birthday&#39;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">We use <code>SortablePage</code> as a type hint instead of <code>wcf\acp\page\PersonListPage</code> because we will be using the same event listener class in the front end to also allow sorting that list by birthday.</p>
</div>
<p>As the relevant template codes are only one line each, we will simply put them directly in the <code>templateListener.xml</code> file that will be shown <a href="#templatelistenerxml">later on</a>.
The code for the table head is similar to the other <code>th</code> elements:</p>
<div class="highlight"><pre><span></span><code><span class="x">&lt;th class=&quot;columnDate columnBirthday</span><span class="cp">{</span><span class="nf">if</span> <span class="nv">$sortField</span> <span class="o">==</span> <span class="s1">&#39;birthday&#39;</span><span class="cp">}</span><span class="x"> active </span><span class="cp">{</span><span class="o">@</span><span class="nv">$sortOrder</span><span class="cp">}{</span><span class="nf">/if</span><span class="cp">}</span><span class="x">&quot;&gt;&lt;a href=&quot;</span><span class="cp">{</span><span class="nf">link</span> <span class="na">controller</span><span class="o">=</span><span class="s1">&#39;PersonList&#39;</span><span class="cp">}</span><span class="x">pageNo=</span><span class="cp">{</span><span class="o">@</span><span class="nv">$pageNo</span><span class="cp">}</span><span class="x">&amp;sortField=birthday&amp;sortOrder=</span><span class="cp">{</span><span class="nf">if</span> <span class="nv">$sortField</span> <span class="o">==</span> <span class="s1">&#39;birthday&#39;</span> <span class="o">&amp;&amp;</span> <span class="nv">$sortOrder</span> <span class="o">==</span> <span class="s1">&#39;ASC&#39;</span><span class="cp">}</span><span class="x">DESC</span><span class="cp">{</span><span class="nf">else</span><span class="cp">}</span><span class="x">ASC</span><span class="cp">{</span><span class="nf">/if</span><span class="cp">}{</span><span class="nf">/link</span><span class="cp">}</span><span class="x">&quot;&gt;</span><span class="cp">{</span><span class="nf">lang</span><span class="cp">}</span><span class="x">wcf.person.birthday</span><span class="cp">{</span><span class="nf">/lang</span><span class="cp">}</span><span class="x">&lt;/a&gt;&lt;/th&gt;</span>
</code></pre></div>
<p>For the table body’s column, we need to make sure that the birthday is only show if it is actually set:</p>
<div class="highlight"><pre><span></span><code><span class="x">&lt;td class=&quot;columnDate columnBirthday&quot;&gt;</span><span class="cp">{</span><span class="nf">if</span> <span class="nv">$person</span><span class="o">-&gt;</span><span class="na">birthday</span> <span class="o">!==</span> <span class="s1">&#39;0000-00-00&#39;</span><span class="cp">}{</span><span class="o">@</span><span class="nv">$person</span><span class="o">-&gt;</span><span class="na">birthday</span><span class="o">|</span><span class="na">strtotime</span><span class="o">|</span><span class="na">date</span><span class="cp">}{</span><span class="nf">/if</span><span class="cp">}</span><span class="x">&lt;/td&gt;</span>
</code></pre></div>
<h2 id="adding-birthday-in-front-end">Adding Birthday in Front End<a class="headerlink" href="#adding-birthday-in-front-end" title="Permanent link">#</a></h2>
<p>In the front end, we also want to make the list sortable by birthday and show the birthday as part of each person’s “statistics”.</p>
<p>To add the birthday as a valid sort field, we use <code>BirthdaySortFieldPersonListPageListener</code> just as in the ACP.
In the front end, we will now use a template (<code>__personListBirthdaySortField.tpl</code>) instead of a directly putting the template code in the <code>templateListener.xml</code> file:</p>
<div class="highlight"><pre><span></span><code><span class="x">&lt;option value=&quot;birthday&quot;</span><span class="cp">{</span><span class="nf">if</span> <span class="nv">$sortField</span> <span class="o">==</span> <span class="s1">&#39;birthday&#39;</span><span class="cp">}</span><span class="x"> selected</span><span class="cp">{</span><span class="nf">/if</span><span class="cp">}</span><span class="x">&gt;</span><span class="cp">{</span><span class="nf">lang</span><span class="cp">}</span><span class="x">wcf.person.birthday</span><span class="cp">{</span><span class="nf">/lang</span><span class="cp">}</span><span class="x">&lt;/option&gt;</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">You might have noticed the two underscores at the beginning of the template file. For templates that are included via template listeners, this is the naming convention we use.</p>
</div>
<p>Putting the template code into a file has the advantage that in the administrator is able to edit the code directly via a custom template group, even though in this case this might not be very probable.</p>
<p>To show the birthday, we use the following template code for the <code>personStatistics</code> template event, which again makes sure that the birthday is only shown if it is actually set:</p>
<div class="highlight"><pre><span></span><code><span class="cp">{</span><span class="nf">if</span> <span class="nv">$person</span><span class="o">-&gt;</span><span class="na">birthday</span> <span class="o">!==</span> <span class="s1">&#39;0000-00-00&#39;</span><span class="cp">}</span><span class="x"></span>
<span class="x">    &lt;dt&gt;</span><span class="cp">{</span><span class="nf">lang</span><span class="cp">}</span><span class="x">wcf.person.birthday</span><span class="cp">{</span><span class="nf">/lang</span><span class="cp">}</span><span class="x">&lt;/dt&gt;</span>
<span class="x">    &lt;dd&gt;</span><span class="cp">{</span><span class="o">@</span><span class="nv">$person</span><span class="o">-&gt;</span><span class="na">birthday</span><span class="o">|</span><span class="na">strtotime</span><span class="o">|</span><span class="na">date</span><span class="cp">}</span><span class="x">&lt;/dd&gt;</span>
<span class="cp">{</span><span class="nf">/if</span><span class="cp">}</span><span class="x"></span>
</code></pre></div>
<h2 id="templatelistenerxml"><code>templateListener.xml</code><a class="headerlink" href="#templatelistenerxml" title="Permanent link">#</a></h2>
<p>The following code shows the <code>templateListener.xml</code> file used to install all mentioned template listeners:</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;data</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.woltlab.com&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.woltlab.com http://www.woltlab.com/tornado/XSD/templateListener.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;import&gt;</span>
        <span class="c">&lt;!-- admin --&gt;</span>
        <span class="nt">&lt;templatelistener</span> <span class="na">name=</span><span class="s">&quot;personListBirthdayColumnHead&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;eventname&gt;</span>columnHeads<span class="nt">&lt;/eventname&gt;</span>
            <span class="nt">&lt;environment&gt;</span>admin<span class="nt">&lt;/environment&gt;</span>
            <span class="nt">&lt;templatecode&gt;</span><span class="cp">&lt;![CDATA[&lt;th class=&quot;columnDate columnBirthday{if $sortField == &#39;birthday&#39;} active {@$sortOrder}{/if}&quot;&gt;&lt;a href=&quot;{link controller=&#39;PersonList&#39;}pageNo={@$pageNo}&amp;sortField=birthday&amp;sortOrder={if $sortField == &#39;birthday&#39; &amp;&amp; $sortOrder == &#39;ASC&#39;}DESC{else}ASC{/if}{/link}&quot;&gt;{lang}wcf.person.birthday{/lang}&lt;/a&gt;&lt;/th&gt;]]&gt;</span><span class="nt">&lt;/templatecode&gt;</span>
            <span class="nt">&lt;templatename&gt;</span>personList<span class="nt">&lt;/templatename&gt;</span>
        <span class="nt">&lt;/templatelistener&gt;</span>
        <span class="nt">&lt;templatelistener</span> <span class="na">name=</span><span class="s">&quot;personListBirthdayColumn&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;eventname&gt;</span>columns<span class="nt">&lt;/eventname&gt;</span>
            <span class="nt">&lt;environment&gt;</span>admin<span class="nt">&lt;/environment&gt;</span>
            <span class="nt">&lt;templatecode&gt;</span><span class="cp">&lt;![CDATA[&lt;td class=&quot;columnDate columnBirthday&quot;&gt;{if $person-&gt;birthday !== &#39;0000-00-00&#39;}{@$person-&gt;birthday|strtotime|date}{/if}&lt;/td&gt;]]&gt;</span><span class="nt">&lt;/templatecode&gt;</span>
            <span class="nt">&lt;templatename&gt;</span>personList<span class="nt">&lt;/templatename&gt;</span>
        <span class="nt">&lt;/templatelistener&gt;</span>
        <span class="nt">&lt;templatelistener</span> <span class="na">name=</span><span class="s">&quot;personAddBirthday&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;eventname&gt;</span>dataFields<span class="nt">&lt;/eventname&gt;</span>
            <span class="nt">&lt;environment&gt;</span>admin<span class="nt">&lt;/environment&gt;</span>
            <span class="nt">&lt;templatecode&gt;</span><span class="cp">&lt;![CDATA[{include file=&#39;__personAddBirthday&#39;}]]&gt;</span><span class="nt">&lt;/templatecode&gt;</span>
            <span class="nt">&lt;templatename&gt;</span>personAdd<span class="nt">&lt;/templatename&gt;</span>
        <span class="nt">&lt;/templatelistener&gt;</span>
        <span class="c">&lt;!-- /admin --&gt;</span>

        <span class="c">&lt;!-- user --&gt;</span>
        <span class="nt">&lt;templatelistener</span> <span class="na">name=</span><span class="s">&quot;personListBirthday&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;eventname&gt;</span>personStatistics<span class="nt">&lt;/eventname&gt;</span>
            <span class="nt">&lt;environment&gt;</span>user<span class="nt">&lt;/environment&gt;</span>
            <span class="nt">&lt;templatecode&gt;</span><span class="cp">&lt;![CDATA[{include file=&#39;__personListBirthday&#39;}]]&gt;</span><span class="nt">&lt;/templatecode&gt;</span>
            <span class="nt">&lt;templatename&gt;</span>personList<span class="nt">&lt;/templatename&gt;</span>
        <span class="nt">&lt;/templatelistener&gt;</span>
        <span class="nt">&lt;templatelistener</span> <span class="na">name=</span><span class="s">&quot;personListBirthdaySortField&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;eventname&gt;</span>sortField<span class="nt">&lt;/eventname&gt;</span>
            <span class="nt">&lt;environment&gt;</span>user<span class="nt">&lt;/environment&gt;</span>
            <span class="nt">&lt;templatecode&gt;</span><span class="cp">&lt;![CDATA[{include file=&#39;__personListBirthdaySortField&#39;}]]&gt;</span><span class="nt">&lt;/templatecode&gt;</span>
            <span class="nt">&lt;templatename&gt;</span>personList<span class="nt">&lt;/templatename&gt;</span>
        <span class="nt">&lt;/templatelistener&gt;</span>
        <span class="c">&lt;!-- /user --&gt;</span>
    <span class="nt">&lt;/import&gt;</span>
<span class="nt">&lt;/data&gt;</span>
</code></pre></div>
<p>In cases where a template is used, we simply use the <code>include</code> syntax to load the template.</p>
<h2 id="eventlistenerxml"><code>eventListener.xml</code><a class="headerlink" href="#eventlistenerxml" title="Permanent link">#</a></h2>
<p>There are two event listeners, <code>birthdaySortFieldAdminPersonList</code> and <code>birthdaySortFieldPersonList</code>, that make <code>birthday</code> a valid sort field in the ACP and the front end, respectively, and the rest takes care of setting the birthday.
The event listener <code>birthdayPersonAddFormInherited</code> takes care of the events that are relevant for both adding and editing people, thus it listens to the <code>PersonAddForm</code> class but has <code>inherit</code> set to <code>1</code> so that it also listens to the events of the <code>PersonEditForm</code> class.
In contrast, reading the existing birthday from a person is only relevant for editing so that the event listener <code>birthdayPersonEditForm</code> only listens to that class.</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;data</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.woltlab.com&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.woltlab.com http://www.woltlab.com/XSD/tornado/eventListener.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;import&gt;</span>
        <span class="c">&lt;!-- admin --&gt;</span>
        <span class="nt">&lt;eventlistener</span> <span class="na">name=</span><span class="s">&quot;birthdaySortFieldAdminPersonList&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;environment&gt;</span>admin<span class="nt">&lt;/environment&gt;</span>
            <span class="nt">&lt;eventclassname&gt;</span>wcf\acp\page\PersonListPage<span class="nt">&lt;/eventclassname&gt;</span>
            <span class="nt">&lt;eventname&gt;</span>validateSortField<span class="nt">&lt;/eventname&gt;</span>
            <span class="nt">&lt;listenerclassname&gt;</span>wcf\system\event\listener\BirthdaySortFieldPersonListPageListener<span class="nt">&lt;/listenerclassname&gt;</span>
        <span class="nt">&lt;/eventlistener&gt;</span>
        <span class="nt">&lt;eventlistener</span> <span class="na">name=</span><span class="s">&quot;birthdayPersonAddForm&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;environment&gt;</span>admin<span class="nt">&lt;/environment&gt;</span>
            <span class="nt">&lt;eventclassname&gt;</span>wcf\acp\form\PersonAddForm<span class="nt">&lt;/eventclassname&gt;</span>
            <span class="nt">&lt;eventname&gt;</span>saved<span class="nt">&lt;/eventname&gt;</span>
            <span class="nt">&lt;listenerclassname&gt;</span>wcf\system\event\listener\BirthdayPersonAddFormListener<span class="nt">&lt;/listenerclassname&gt;</span>
        <span class="nt">&lt;/eventlistener&gt;</span>
        <span class="nt">&lt;eventlistener</span> <span class="na">name=</span><span class="s">&quot;birthdayPersonAddFormInherited&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;environment&gt;</span>admin<span class="nt">&lt;/environment&gt;</span>
            <span class="nt">&lt;eventclassname&gt;</span>wcf\acp\form\PersonAddForm<span class="nt">&lt;/eventclassname&gt;</span>
            <span class="nt">&lt;eventname&gt;</span>assignVariables,readFormParameters,save,validate<span class="nt">&lt;/eventname&gt;</span>
            <span class="nt">&lt;listenerclassname&gt;</span>wcf\system\event\listener\BirthdayPersonAddFormListener<span class="nt">&lt;/listenerclassname&gt;</span>
            <span class="nt">&lt;inherit&gt;</span>1<span class="nt">&lt;/inherit&gt;</span>
        <span class="nt">&lt;/eventlistener&gt;</span>
        <span class="nt">&lt;eventlistener</span> <span class="na">name=</span><span class="s">&quot;birthdayPersonEditForm&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;environment&gt;</span>admin<span class="nt">&lt;/environment&gt;</span>
            <span class="nt">&lt;eventclassname&gt;</span>wcf\acp\form\PersonEditForm<span class="nt">&lt;/eventclassname&gt;</span>
            <span class="nt">&lt;eventname&gt;</span>readData<span class="nt">&lt;/eventname&gt;</span>
            <span class="nt">&lt;listenerclassname&gt;</span>wcf\system\event\listener\BirthdayPersonAddFormListener<span class="nt">&lt;/listenerclassname&gt;</span>
        <span class="nt">&lt;/eventlistener&gt;</span>
        <span class="c">&lt;!-- /admin --&gt;</span>

        <span class="c">&lt;!-- user --&gt;</span>
        <span class="nt">&lt;eventlistener</span> <span class="na">name=</span><span class="s">&quot;birthdaySortFieldPersonList&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;environment&gt;</span>user<span class="nt">&lt;/environment&gt;</span>
            <span class="nt">&lt;eventclassname&gt;</span>wcf\page\PersonListPage<span class="nt">&lt;/eventclassname&gt;</span>
            <span class="nt">&lt;eventname&gt;</span>validateSortField<span class="nt">&lt;/eventname&gt;</span>
            <span class="nt">&lt;listenerclassname&gt;</span>wcf\system\event\listener\BirthdaySortFieldPersonListPageListener<span class="nt">&lt;/listenerclassname&gt;</span>
        <span class="nt">&lt;/eventlistener&gt;</span>
        <span class="c">&lt;!-- /user --&gt;</span>
    <span class="nt">&lt;/import&gt;</span>
<span class="nt">&lt;/data&gt;</span>
</code></pre></div>
<h2 id="packagexml"><code>package.xml</code><a class="headerlink" href="#packagexml" title="Permanent link">#</a></h2>
<p>The only relevant difference between the <code>package.xml</code> file of the base page from part 1 and the <code>package.xml</code> file of this package is that this package requires the base package <code>com.woltlab.wcf.people</code> (see <code>&lt;requiredpackages&gt;</code>):</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;package</span> <span class="na">name=</span><span class="s">&quot;com.woltlab.wcf.people.birthday&quot;</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.woltlab.com&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.woltlab.com http://www.woltlab.com/XSD/tornado/package.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;packageinformation&gt;</span>
        <span class="nt">&lt;packagename&gt;</span>WoltLab Suite Core Tutorial: People (Birthday)<span class="nt">&lt;/packagename&gt;</span>
        <span class="nt">&lt;packagedescription&gt;</span>Adds a birthday field to the people management system as part of a tutorial to create packages.<span class="nt">&lt;/packagedescription&gt;</span>
        <span class="nt">&lt;version&gt;</span>3.1.0<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;date&gt;</span>2018-03-30<span class="nt">&lt;/date&gt;</span>
    <span class="nt">&lt;/packageinformation&gt;</span>

    <span class="nt">&lt;authorinformation&gt;</span>
        <span class="nt">&lt;author&gt;</span>WoltLab GmbH<span class="nt">&lt;/author&gt;</span>
        <span class="nt">&lt;authorurl&gt;</span>http://www.woltlab.com<span class="nt">&lt;/authorurl&gt;</span>
    <span class="nt">&lt;/authorinformation&gt;</span>

    <span class="nt">&lt;requiredpackages&gt;</span>
        <span class="nt">&lt;requiredpackage</span> <span class="na">minversion=</span><span class="s">&quot;3.1.0&quot;</span><span class="nt">&gt;</span>com.woltlab.wcf<span class="nt">&lt;/requiredpackage&gt;</span>
        <span class="nt">&lt;requiredpackage</span> <span class="na">minversion=</span><span class="s">&quot;3.1.0&quot;</span><span class="nt">&gt;</span>com.woltlab.wcf.people<span class="nt">&lt;/requiredpackage&gt;</span>
    <span class="nt">&lt;/requiredpackages&gt;</span>

    <span class="nt">&lt;excludedpackages&gt;</span>
        <span class="nt">&lt;excludedpackage</span> <span class="na">version=</span><span class="s">&quot;3.2.0 Alpha 1&quot;</span><span class="nt">&gt;</span>com.woltlab.wcf<span class="nt">&lt;/excludedpackage&gt;</span>
    <span class="nt">&lt;/excludedpackages&gt;</span>

    <span class="nt">&lt;compatibility&gt;</span>
        <span class="nt">&lt;api</span> <span class="na">version=</span><span class="s">&quot;2018&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/compatibility&gt;</span>

    <span class="nt">&lt;instructions</span> <span class="na">type=</span><span class="s">&quot;install&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;instruction</span> <span class="na">type=</span><span class="s">&quot;acpTemplate&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;instruction</span> <span class="na">type=</span><span class="s">&quot;file&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;instruction</span> <span class="na">type=</span><span class="s">&quot;sql&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;instruction</span> <span class="na">type=</span><span class="s">&quot;template&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;instruction</span> <span class="na">type=</span><span class="s">&quot;language&quot;</span> <span class="nt">/&gt;</span>

        <span class="nt">&lt;instruction</span> <span class="na">type=</span><span class="s">&quot;eventListener&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;instruction</span> <span class="na">type=</span><span class="s">&quot;templateListener&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/instructions&gt;</span>
<span class="nt">&lt;/package&gt;</span>
</code></pre></div>
<hr />
<p>This concludes the second part of our tutorial series after which you now have extended the base package using event listeners and template listeners that allow you to enter the birthday of the people.</p>
<p>The complete source code of this part can be found on <a href="https://github.com/WoltLab/woltlab.github.io/tree/master/_includes/tutorial/tutorial-series/part-2">GitHub</a>.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../part_1/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Part 1
            </div>
          </div>
        </a>
      
      
        <a href="../part_3/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Part 3
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright © 2020 WoltLab GmbH
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      <div class="md-footer-copyright">
	<a href="https://www.woltlab.com/legal-notice/">Legal Notice</a> 
	<a href="https://www.woltlab.com/privacy-policy/">Privacy Policy</a>
</div>
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../../assets/javascripts/workers/search.fb4a9340.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.ca5457b8.min.js"></script>
      
    
  </body>
</html>